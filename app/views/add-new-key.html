{% extends "layout.html" %}
{% block pageTitle %}
  Register application
{% endblock %}
{% block content %}
  <div class="govuk-grid-row">
    {% include "includes/sidebar.html" %}
    <div class="govuk-grid-column-two-thirds">
      <form action="" method="post">
      <h1 class="govuk-heading-xl">
        New API client key
      </h1>

      {% if errorKeyName  == true or
        errorRestrictedIPDetail == true or
        errorJavascriptDomainDetail == true or
        errorRedirectURIDetail == true
      %}
            {{ govukErrorSummary({
              titleText: "There is a problem",
              errorList: errorList
            }) }}
      {% endif %}

      {% if errorKeyName  == true %}
      {{ govukInput({
        label: {
          text: "Key name"
        },
        id: "key-name",
        name: "key-name",
        errorMessage: {
            text: "Enter your key name"
        }
      }) }}
      {% else %}
      {{ govukInput({
        label: {
          text: "Key name"
        },
        id: "key-name",
        name: "key-name"
      }) }}
      {% endif %}

      {{ govukTextarea({
        name: "key-description-detail",
        id: "key-description-detail",
        label: {
          text: "Key description"
        }
      }) }}
      
      
      {% if selectedChoice  == 'stream'  %}
      {{ govukRadios({
        idPrefix: "key-type",
        name: "key-type",
        fieldset: {
          legend: {
            text: "Select the type of API client key you want to add:"
          }
        },
        items: [
          {
            value: "rest",
            text: "REST"
          },
          {
            value: "stream",
            text: "Streaming",
            checked: true
          },
          {
            value: "web",
            text: "Web"
          }
        ]
      }) }}
      {% elseif selectedChoice  == 'web'  %}
      {{ govukRadios({
        idPrefix: "key-type",
        name: "key-type",
        fieldset: {
          legend: {
            text: "Select the type of API client key you want to add:"
          }
        },
        items: [
          {
            value: "rest",
            text: "REST"
          },
          {
            value: "stream",
            text: "Streaming"
          },
          {
            value: "web",
            text: "Web",
            checked: true
          }
        ]
      }) }}
      {% else %}
       {{ govukRadios({
        idPrefix: "key-type",
        name: "key-type",
        fieldset: {
          legend: {
            text: "Select the type of API client key you want to add:"
          }
        },
        items: [
          {
            value: "rest",
            text: "REST",
            checked: true
          },
          {
            value: "stream",
            text: "Streaming",
            id: "key-type-2"
          },
          {
            value: "web",
            text: "Web",
            id: "key-type-3"
          }
        ]
      }) }}


      {% endif %}




      <div class='restrictedIP'>
        {% if errorRestrictedIPDetail  == true %}
        {{ govukTextarea({
          name: "restrictedIP-detail",
          id: "restrictedIP-detail",
          hint: {
            text: "Separate each IP with a comma."
          },
          label: {
            text: "Restricted IPs"
          },
          errorMessage: {
            text: "Enter your restricted IPs"
        }
        }) }}
        {% else %}
        {{ govukTextarea({
          name: "restrictedIP-detail",
          id: "restrictedIP-detail",
          hint: {
            text: "Separate each IP with a comma."
          },
          label: {
            text: "Restricted IPs"
          }
        }) }}
        {% endif %}
      </div>


       <div class='javascriptDomain'>
        {% if errorJavascriptDomainDetail  == true %}
        {{ govukTextarea({
          name: "javascriptDomain-detail",
          id: "javascriptDomain-detail",
          hint: {
            text: "Separate each domain with a comma."
          },
          label: {
            text: "JavaScript domains"
          },
          errorMessage: {
            text: "Enter your JavaScript Domains"
          }
        }) }}
        {% else %}
        {{ govukTextarea({
          name: "javascriptDomain-detail",
          id: "javascriptDomain-detail",
          hint: {
            text: "Separate each domain with a comma."
          },
          label: {
            text: "JavaScript domains"
          }
        }) }}
        {% endif %}
        </div>


       <div class='redirectURI'>
        {% if errorRedirectURIDetail  == true %}
        {{ govukTextarea({
          name: "redirectURI-detail",
          id: "redirectURI-detail",
          hint: {
            text: "Separate each URI with a comma."
          },
          label: {
            text: "Redirect URIs"
          },
          errorMessage: {
            text: "Enter your redirect URIs"
          }
        }) }}
        {% else %}
        {{ govukTextarea({
          name: "redirectURI-detail",
          id: "redirectURI-detail",
          hint: {
            text: "Separate each URI with a comma."
          },
          label: {
            text: "Redirect URIs"
          }
        }) }}
        {% endif %}
    </div>

      {{ govukButton({
        text: "Add key",
        classes: "govuk-!-margin-right-1"
      }) }}
      {{ govukButton({
        text: "Cancel",
        classes: "govuk-button--secondary",
        href: "manage-applications"
      }) }}
      </form>
    </div>

  </div>
{% endblock %}